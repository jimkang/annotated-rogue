<!DOCTYPE html>

<html>
<head>
  <title>score.c</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="hit.html">
                  hit.c
                </a>
              
                
                <a class="source" href="init.html">
                  init.c
                </a>
              
                
                <a class="source" href="inventory.html">
                  inventory.c
                </a>
              
                
                <a class="source" href="level.html">
                  level.c
                </a>
              
                
                <a class="source" href="machdep.html">
                  machdep.c
                </a>
              
                
                <a class="source" href="main.html">
                  main.c
                </a>
              
                
                <a class="source" href="message.html">
                  message.c
                </a>
              
                
                <a class="source" href="monster.html">
                  monster.c
                </a>
              
                
                <a class="source" href="move.html">
                  move.c
                </a>
              
                
                <a class="source" href="object.html">
                  object.c
                </a>
              
                
                <a class="source" href="pack.html">
                  pack.c
                </a>
              
                
                <a class="source" href="pathnames.html">
                  pathnames.h
                </a>
              
                
                <a class="source" href="play.html">
                  play.c
                </a>
              
                
                <a class="source" href="random.html">
                  random.c
                </a>
              
                
                <a class="source" href="ring.html">
                  ring.c
                </a>
              
                
                <a class="source" href="rogue.html">
                  rogue.h
                </a>
              
                
                <a class="source" href="room.html">
                  room.c
                </a>
              
                
                <a class="source" href="save.html">
                  save.c
                </a>
              
                
                <a class="source" href="score.html">
                  score.c
                </a>
              
                
                <a class="source" href="spec_hit.html">
                  spec_hit.c
                </a>
              
                
                <a class="source" href="throw.html">
                  throw.c
                </a>
              
                
                <a class="source" href="trap.html">
                  trap.c
                </a>
              
                
                <a class="source" href="use.html">
                  use.c
                </a>
              
                
                <a class="source" href="zap.html">
                  zap.c
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>score.c</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*-
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre> * Copyright (c) <span class="hljs-number">1988</span>, <span class="hljs-number">1993</span>
 *	The Regents of the University of California.  All rights reserved.
 *</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre> * This code is derived from software contributed to Berkeley by
 * Timothy C. Stoehr.
 *</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre> * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * <span class="hljs-number">1.</span> Redistributions of source code must retain the above copyright
 *    notice, <span class="hljs-keyword">this</span> <span class="hljs-built_in">list</span> of conditions and the following disclaimer.
 * <span class="hljs-number">2.</span> Redistributions in binary form must reproduce the above copyright
 *    notice, <span class="hljs-keyword">this</span> <span class="hljs-built_in">list</span> of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * <span class="hljs-number">3.</span> Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from <span class="hljs-keyword">this</span> software
 *    without specific prior written permission.
 *</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre> * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre> * @(#)score.c	<span class="hljs-number">8.1</span> (Berkeley) <span class="hljs-number">5</span>/<span class="hljs-number">31</span>/<span class="hljs-number">93</span>
 * $FreeBSD: src/games/rogue/score.c,v <span class="hljs-number">1.4</span> <span class="hljs-number">1999</span>/<span class="hljs-number">11</span>/<span class="hljs-number">30</span> <span class="hljs-number">03</span>:<span class="hljs-number">49</span>:<span class="hljs-number">27</span> billf Exp $
 * $DragonFly: src/games/rogue/score.c,v <span class="hljs-number">1.4</span> <span class="hljs-number">2006</span>/<span class="hljs-number">09</span>/<span class="hljs-number">02</span> <span class="hljs-number">19</span>:<span class="hljs-number">31</span>:<span class="hljs-number">07</span> pavalos Exp $
 */</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre> * score.c
 *</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre> * This source herein may be modified and/or distributed by anybody who
 * so desires, with the following restrictions:
 *    <span class="hljs-number">1.</span>)  No portion of <span class="hljs-keyword">this</span> notice shall be removed.
 *    <span class="hljs-number">2.</span>)  Credit shall not be taken <span class="hljs-keyword">for</span> the creation of <span class="hljs-keyword">this</span> source.
 *    <span class="hljs-number">3.</span>)  This code is not to be traded, sold, or used <span class="hljs-keyword">for</span> personal
 *         gain or profit.
 *</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre> */</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">"rogue.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">"pathnames.h"</span></span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">extern</span> <span class="hljs-keyword">char</span> *m_names[];
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">short</span> max_level;
<span class="hljs-keyword">extern</span> boolean score_only, no_skull, msg_cleared;
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">char</span> *byebye_string, *nick_name;</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">center</span><span class="hljs-params">(<span class="hljs-keyword">short</span>, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">get_value</span><span class="hljs-params">(<span class="hljs-keyword">const</span> object *)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">id_all</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insert_score</span><span class="hljs-params">(<span class="hljs-keyword">char</span> [][<span class="hljs-number">82</span>], <span class="hljs-keyword">char</span> [][<span class="hljs-number">30</span>], <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *, <span class="hljs-keyword">short</span>, <span class="hljs-keyword">short</span>,
			<span class="hljs-keyword">const</span> object *, <span class="hljs-keyword">short</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">name_cmp</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">nickize</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sell_pack</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sf_error</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">killed_by</span><span class="hljs-params">(<span class="hljs-keyword">const</span> object *monster, <span class="hljs-keyword">short</span> other)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">char</span> buf[<span class="hljs-number">128</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	md_ignore_signals();</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (other != QUIT) {
		rogue.gold = ((rogue.gold * <span class="hljs-number">9</span>) / <span class="hljs-number">10</span>);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (other) {
		<span class="hljs-keyword">switch</span>(other) {
		<span class="hljs-keyword">case</span> HYPOTHERMIA:
			<span class="hljs-built_in">strcpy</span>(buf, <span class="hljs-string">"died of hypothermia"</span>);
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> STARVATION:
			<span class="hljs-built_in">strcpy</span>(buf, <span class="hljs-string">"died of starvation"</span>);
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> POISON_DART:
			<span class="hljs-built_in">strcpy</span>(buf, <span class="hljs-string">"killed by a dart"</span>);
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> QUIT:
			<span class="hljs-built_in">strcpy</span>(buf, <span class="hljs-string">"quit"</span>);
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> KFIRE:
			<span class="hljs-built_in">strcpy</span>(buf, <span class="hljs-string">"killed by fire"</span>);
			<span class="hljs-keyword">break</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	} <span class="hljs-keyword">else</span> {
		<span class="hljs-built_in">strcpy</span>(buf, <span class="hljs-string">"Killed by "</span>);
		<span class="hljs-keyword">if</span> (is_vowel(m_names[monster-&gt;m_char - <span class="hljs-string">'A'</span>][<span class="hljs-number">0</span>])) {
			<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"an "</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"a "</span>);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-built_in">strcat</span>(buf, m_names[monster-&gt;m_char - <span class="hljs-string">'A'</span>]);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">" with "</span>);
	<span class="hljs-built_in">sprintf</span>(buf+<span class="hljs-built_in">strlen</span>(buf), <span class="hljs-string">"%ld gold"</span>, rogue.gold);
	<span class="hljs-keyword">if</span> ((!other) &amp;&amp; (!no_skull)) {
		clear();
		mvaddstr(<span class="hljs-number">4</span>, <span class="hljs-number">32</span>, <span class="hljs-string">"__---------__"</span>);
		mvaddstr(<span class="hljs-number">5</span>, <span class="hljs-number">30</span>, <span class="hljs-string">"_~             ~_"</span>);
		mvaddstr(<span class="hljs-number">6</span>, <span class="hljs-number">29</span>, <span class="hljs-string">"/                 \\"</span>);
		mvaddstr(<span class="hljs-number">7</span>, <span class="hljs-number">28</span>, <span class="hljs-string">"~                   ~"</span>);
		mvaddstr(<span class="hljs-number">8</span>, <span class="hljs-number">27</span>, <span class="hljs-string">"/                     \\"</span>);
		mvaddstr(<span class="hljs-number">9</span>, <span class="hljs-number">27</span>, <span class="hljs-string">"|    XXXX     XXXX    |"</span>);
		mvaddstr(<span class="hljs-number">10</span>, <span class="hljs-number">27</span>, <span class="hljs-string">"|    XXXX     XXXX    |"</span>);
		mvaddstr(<span class="hljs-number">11</span>, <span class="hljs-number">27</span>, <span class="hljs-string">"|    XXX       XXX    |"</span>);
		mvaddstr(<span class="hljs-number">12</span>, <span class="hljs-number">28</span>, <span class="hljs-string">"\\         @         /"</span>);
		mvaddstr(<span class="hljs-number">13</span>, <span class="hljs-number">29</span>, <span class="hljs-string">"--\\     @@@     /--"</span>);
		mvaddstr(<span class="hljs-number">14</span>, <span class="hljs-number">30</span>, <span class="hljs-string">"| |    @@@    | |"</span>);
		mvaddstr(<span class="hljs-number">15</span>, <span class="hljs-number">30</span>, <span class="hljs-string">"| |           | |"</span>);
		mvaddstr(<span class="hljs-number">16</span>, <span class="hljs-number">30</span>, <span class="hljs-string">"| vvVvvvvvvvVvv |"</span>);
		mvaddstr(<span class="hljs-number">17</span>, <span class="hljs-number">30</span>, <span class="hljs-string">"|  ^^^^^^^^^^^  |"</span>);
		mvaddstr(<span class="hljs-number">18</span>, <span class="hljs-number">31</span>, <span class="hljs-string">"\\_           _/"</span>);
		mvaddstr(<span class="hljs-number">19</span>, <span class="hljs-number">33</span>, <span class="hljs-string">"~---------~"</span>);
		center(<span class="hljs-number">21</span>, nick_name);
		center(<span class="hljs-number">22</span>, buf);
	} <span class="hljs-keyword">else</span> {
		message(buf, <span class="hljs-number">0</span>);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	message(<span class="hljs-string">""</span>, <span class="hljs-number">0</span>);
	put_scores(monster, other);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">win</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	unwield(rogue.weapon);		<span class="hljs-comment">/* disarm and relax */</span>
	unwear(rogue.armor);
	un_put_on(rogue.left_ring);
	un_put_on(rogue.right_ring);</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	clear();
	mvaddstr(<span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-string">"@   @  @@@   @   @      @  @  @   @@@   @   @   @"</span>);
	mvaddstr(<span class="hljs-number">11</span>, <span class="hljs-number">11</span>, <span class="hljs-string">" @ @  @   @  @   @      @  @  @  @   @  @@  @   @"</span>);
	mvaddstr(<span class="hljs-number">12</span>, <span class="hljs-number">11</span>, <span class="hljs-string">"  @   @   @  @   @      @  @  @  @   @  @ @ @   @"</span>);
	mvaddstr(<span class="hljs-number">13</span>, <span class="hljs-number">11</span>, <span class="hljs-string">"  @   @   @  @   @      @  @  @  @   @  @  @@"</span>);
	mvaddstr(<span class="hljs-number">14</span>, <span class="hljs-number">11</span>, <span class="hljs-string">"  @    @@@    @@@        @@ @@    @@@   @   @   @"</span>);
	mvaddstr(<span class="hljs-number">17</span>, <span class="hljs-number">11</span>, <span class="hljs-string">"Congratulations,  you have  been admitted  to  the"</span>);
	mvaddstr(<span class="hljs-number">18</span>, <span class="hljs-number">11</span>, <span class="hljs-string">"Fighters' Guild.   You return home,  sell all your"</span>);
	mvaddstr(<span class="hljs-number">19</span>, <span class="hljs-number">11</span>, <span class="hljs-string">"treasures at great profit and retire into comfort."</span>);
	message(<span class="hljs-string">""</span>, <span class="hljs-number">0</span>);
	message(<span class="hljs-string">""</span>, <span class="hljs-number">0</span>);
	id_all();
	sell_pack();
	put_scores(<span class="hljs-literal">NULL</span>, WIN);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">quit</span><span class="hljs-params">(boolean from_intrpt)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">char</span> buf[<span class="hljs-number">128</span>];
	<span class="hljs-keyword">short</span> i, orow, ocol;
	boolean mc;</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	orow = ocol = <span class="hljs-number">0</span>;
	mc = FALSE;
	md_ignore_signals();</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (from_intrpt) {
		orow = rogue.row;
		ocol = rogue.col;</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		mc = msg_cleared;</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; DCOLS; i++) {
			buf[i] = (short ) mvinch(<span class="hljs-number">0</span>, i);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	}</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	check_message();
	message(<span class="hljs-string">"really quit?"</span>, <span class="hljs-number">1</span>);
	<span class="hljs-keyword">if</span> (rgetchar() != <span class="hljs-string">'y'</span>) {
		md_heed_signals();
		check_message();
		<span class="hljs-keyword">if</span> (from_intrpt) {
			<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; DCOLS; i++) {
				mvaddch(<span class="hljs-number">0</span>, i, buf[i]);
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>			msg_cleared = mc;
			move(orow, ocol);
			refresh();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		return;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (from_intrpt) {
		clean_up(byebye_string);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	check_message();
	killed_by(<span class="hljs-literal">NULL</span>, QUIT);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">put_scores</span><span class="hljs-params">(<span class="hljs-keyword">const</span> object *monster, <span class="hljs-keyword">short</span> other)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">short</span> i, n, rank = <span class="hljs-number">10</span>, x, ne = <span class="hljs-number">0</span>, found_player = <span class="hljs-number">-1</span>;
	<span class="hljs-keyword">char</span> scores[<span class="hljs-number">10</span>][<span class="hljs-number">82</span>];
	<span class="hljs-keyword">char</span> n_names[<span class="hljs-number">10</span>][<span class="hljs-number">30</span>];
	<span class="hljs-keyword">char</span> buf[<span class="hljs-number">128</span>];
	FILE *fp;
	<span class="hljs-keyword">long</span> s;
	boolean pause = score_only;</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	md_lock(<span class="hljs-number">1</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ((fp = fopen(_PATH_SCOREFILE, <span class="hljs-string">"r+"</span>)) == <span class="hljs-literal">NULL</span> &amp;&amp;
	    (fp = fopen(_PATH_SCOREFILE, <span class="hljs-string">"w+"</span>)) == <span class="hljs-literal">NULL</span>) {
		message(<span class="hljs-string">"cannot read/write/create score file"</span>, <span class="hljs-number">0</span>);
		sf_error();
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	rewind(fp);
	xxx(<span class="hljs-number">1</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
		<span class="hljs-keyword">if</span> (((n = fread(scores[i], sizeof(char), <span class="hljs-number">80</span>, fp)) &lt; <span class="hljs-number">80</span>) &amp;&amp; (n != <span class="hljs-number">0</span>)) {
			sf_error();
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n != <span class="hljs-number">0</span>) {
			xxxx(scores[i], <span class="hljs-number">80</span>);
			<span class="hljs-keyword">if</span> ((n = fread(n_names[i], sizeof(char), <span class="hljs-number">30</span>, fp)) &lt; <span class="hljs-number">30</span>) {
				sf_error();
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>			xxxx(n_names[i], <span class="hljs-number">30</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">break</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		ne++;
		<span class="hljs-keyword">if</span> ((!score_only) &amp;&amp; (found_player == <span class="hljs-number">-1</span>)) {
			<span class="hljs-keyword">if</span> (!name_cmp(scores[i]+<span class="hljs-number">15</span>, login_name)) {
				x = <span class="hljs-number">5</span>;
				<span class="hljs-keyword">while</span> (scores[i][x] == <span class="hljs-string">' '</span>) {
					x++;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>				s = lget_number(scores[i] + x);
				<span class="hljs-keyword">if</span> (rogue.gold &lt; s) {
					score_only = <span class="hljs-number">1</span>;
				} <span class="hljs-keyword">else</span> {
					found_player = i;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>			}</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		}</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	}</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-comment">/* Remove a superseded entry, if any. */</span>
	<span class="hljs-keyword">if</span> (found_player != <span class="hljs-number">-1</span>) {
		ne--;
		<span class="hljs-keyword">for</span> (i = found_player; i &lt; ne; i++) {
			<span class="hljs-built_in">strcpy</span>(scores[i], scores[i+<span class="hljs-number">1</span>]);
			<span class="hljs-built_in">strcpy</span>(n_names[i], n_names[i+<span class="hljs-number">1</span>]);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	}</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-comment">/* If we're going to insert ourselves, do it now */</span>
	<span class="hljs-keyword">if</span> (!score_only) {
		<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ne; i++) {
			x = <span class="hljs-number">5</span>;
			<span class="hljs-keyword">while</span> (scores[i][x] == <span class="hljs-string">' '</span>) {
				x++;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>			s = lget_number(scores[i] + x);</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (rogue.gold &gt;= s) {
				rank = i;
				<span class="hljs-keyword">break</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		}</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (ne == <span class="hljs-number">0</span>) {
			rank = <span class="hljs-number">0</span>;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((ne &lt; <span class="hljs-number">10</span>) &amp;&amp; (rank == <span class="hljs-number">10</span>)) {
			rank = ne;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (rank &lt; <span class="hljs-number">10</span>) {
			insert_score(scores, n_names, nick_name, rank, ne, monster,
				other);
			<span class="hljs-keyword">if</span> (ne &lt; <span class="hljs-number">10</span>) {
				ne++;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		}</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		rewind(fp);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	clear();
	mvaddstr(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>, <span class="hljs-string">"Top  Ten  Rogueists"</span>);
	mvaddstr(<span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-string">"Rank   Score   Name"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	md_ignore_signals();</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	xxx(<span class="hljs-number">1</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ne; i++) {
		<span class="hljs-keyword">if</span> (i == rank) {
			standout();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (i == <span class="hljs-number">9</span>) {
			scores[i][<span class="hljs-number">0</span>] = <span class="hljs-string">'1'</span>;
			scores[i][<span class="hljs-number">1</span>] = <span class="hljs-string">'0'</span>;
		} <span class="hljs-keyword">else</span> {
			scores[i][<span class="hljs-number">0</span>] = <span class="hljs-string">' '</span>;
			scores[i][<span class="hljs-number">1</span>] = i + <span class="hljs-string">'1'</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		nickize(buf, scores[i], n_names[i]);
		mvaddstr(i+<span class="hljs-number">10</span>, <span class="hljs-number">0</span>, buf);
		<span class="hljs-keyword">if</span> (rank &lt; <span class="hljs-number">10</span>) {
			xxxx(scores[i], <span class="hljs-number">80</span>);
			fwrite(scores[i], <span class="hljs-keyword">sizeof</span>(char), <span class="hljs-number">80</span>, fp);
			xxxx(n_names[i], <span class="hljs-number">30</span>);
			fwrite(n_names[i], <span class="hljs-keyword">sizeof</span>(char), <span class="hljs-number">30</span>, fp);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (i == rank) {
			standend();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	}</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	md_lock(<span class="hljs-number">0</span>);
	refresh();
	fclose(fp);
	message(<span class="hljs-string">""</span>, <span class="hljs-number">0</span>);
	<span class="hljs-keyword">if</span> (pause) {
		message(<span class="hljs-string">""</span>, <span class="hljs-number">0</span>);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	clean_up(<span class="hljs-string">""</span>);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span>
<span class="hljs-title">insert_score</span><span class="hljs-params">(<span class="hljs-keyword">char</span> scores[][<span class="hljs-number">82</span>], <span class="hljs-keyword">char</span> n_names[][<span class="hljs-number">30</span>], <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *n_name,
	     <span class="hljs-keyword">short</span> rank, <span class="hljs-keyword">short</span> n, <span class="hljs-keyword">const</span> object *monster, <span class="hljs-keyword">short</span> other)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">short</span> i;
	<span class="hljs-keyword">char</span> buf[<span class="hljs-number">128</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (n &gt; <span class="hljs-number">0</span>) {
		<span class="hljs-keyword">for</span> (i = n; i &gt; rank; i--) {
			<span class="hljs-keyword">if</span> ((i &lt; <span class="hljs-number">10</span>) &amp;&amp; (i &gt; <span class="hljs-number">0</span>)) {
				<span class="hljs-built_in">strcpy</span>(scores[i], scores[i<span class="hljs-number">-1</span>]);
				<span class="hljs-built_in">strcpy</span>(n_names[i], n_names[i<span class="hljs-number">-1</span>]);
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		}</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	}</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-built_in">sprintf</span>(buf, <span class="hljs-string">"%2d    %6ld   %s: "</span>, rank+<span class="hljs-number">1</span>, rogue.gold, login_name);</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (other) {
		<span class="hljs-keyword">switch</span>(other) {
		<span class="hljs-keyword">case</span> HYPOTHERMIA:
			<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"died of hypothermia"</span>);
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> STARVATION:
			<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"died of starvation"</span>);
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> POISON_DART:
			<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"killed by a dart"</span>);
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> QUIT:
			<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"quit"</span>);
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> WIN:
			<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"a total winner"</span>);
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> KFIRE:
			<span class="hljs-built_in">strcpy</span>(buf, <span class="hljs-string">"killed by fire"</span>);
			<span class="hljs-keyword">break</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	} <span class="hljs-keyword">else</span> {
		<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"killed by "</span>);
		<span class="hljs-keyword">if</span> (is_vowel(m_names[monster-&gt;m_char - <span class="hljs-string">'A'</span>][<span class="hljs-number">0</span>])) {
			<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"an "</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"a "</span>);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-built_in">strcat</span>(buf, m_names[monster-&gt;m_char - <span class="hljs-string">'A'</span>]);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-built_in">sprintf</span>(buf+<span class="hljs-built_in">strlen</span>(buf), <span class="hljs-string">" on level %d "</span>,  max_level);
	<span class="hljs-keyword">if</span> ((other != WIN) &amp;&amp; has_amulet()) {
		<span class="hljs-built_in">strcat</span>(buf, <span class="hljs-string">"with amulet"</span>);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> (i = <span class="hljs-built_in">strlen</span>(buf); i &lt; <span class="hljs-number">79</span>; i++) {
		buf[i] = <span class="hljs-string">' '</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	buf[<span class="hljs-number">79</span>] = <span class="hljs-number">0</span>;
	<span class="hljs-built_in">strcpy</span>(scores[rank], buf);
	<span class="hljs-built_in">strcpy</span>(n_names[rank], n_name);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function">boolean
<span class="hljs-title">is_vowel</span><span class="hljs-params">(<span class="hljs-keyword">short</span> ch)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	return( (ch == <span class="hljs-string">'a'</span>) ||
		(ch == <span class="hljs-string">'e'</span>) ||
		(ch == <span class="hljs-string">'i'</span>) ||
		(ch == <span class="hljs-string">'o'</span>) ||
		(ch == <span class="hljs-string">'u'</span>) );
}</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span>
<span class="hljs-title">sell_pack</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	object *obj;
	<span class="hljs-keyword">short</span> row = <span class="hljs-number">2</span>, val;
	<span class="hljs-keyword">char</span> buf[DCOLS];</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	obj = rogue.pack.next_object;</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	clear();
	mvaddstr(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">"Value      Item"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">while</span> (obj) {
		<span class="hljs-keyword">if</span> (obj-&gt;what_is != FOOD) {
			obj-&gt;identified = <span class="hljs-number">1</span>;
			val = get_value(obj);
			rogue.gold += val;</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (row &lt; DROWS) {
				<span class="hljs-built_in">sprintf</span>(buf, <span class="hljs-string">"%5d      "</span>, val);
				get_desc(obj, buf+<span class="hljs-number">11</span>);
				mvaddstr(row++, <span class="hljs-number">0</span>, buf);
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		}</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		obj = obj-&gt;next_object;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	refresh();
	<span class="hljs-keyword">if</span> (rogue.gold &gt; MAX_GOLD) {
		rogue.gold = MAX_GOLD;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	message(<span class="hljs-string">""</span>, <span class="hljs-number">0</span>);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>
<span class="hljs-title">get_value</span><span class="hljs-params">(<span class="hljs-keyword">const</span> object *obj)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">short</span> wc;
	<span class="hljs-keyword">int</span> val;</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	val = <span class="hljs-number">0</span>;
	wc = obj-&gt;which_kind;</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">switch</span>(obj-&gt;what_is) {
	<span class="hljs-keyword">case</span> WEAPON:
		val = id_weapons[wc].value;
		<span class="hljs-keyword">if</span> ((wc == ARROW) || (wc == DAGGER) || (wc == SHURIKEN) ||
			(wc == DART)) {
			val *= obj-&gt;quantity;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		val += (obj-&gt;d_enchant * <span class="hljs-number">85</span>);
		val += (obj-&gt;hit_enchant * <span class="hljs-number">85</span>);
		<span class="hljs-keyword">break</span>;
	<span class="hljs-keyword">case</span> ARMOR:
		val = id_armors[wc].value;
		val += (obj-&gt;d_enchant * <span class="hljs-number">75</span>);
		<span class="hljs-keyword">if</span> (obj-&gt;is_protected) {
			val += <span class="hljs-number">200</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">break</span>;
	<span class="hljs-keyword">case</span> WAND:
		val = id_wands[wc].value * (obj-&gt;class + <span class="hljs-number">1</span>);
		<span class="hljs-keyword">break</span>;
	<span class="hljs-keyword">case</span> SCROL:
		val = id_scrolls[wc].value * obj-&gt;quantity;
		<span class="hljs-keyword">break</span>;
	<span class="hljs-keyword">case</span> POTION:
		val = id_potions[wc].value * obj-&gt;quantity;
		<span class="hljs-keyword">break</span>;
	<span class="hljs-keyword">case</span> AMULET:
		val = <span class="hljs-number">5000</span>;
		<span class="hljs-keyword">break</span>;
	<span class="hljs-keyword">case</span> RING:
		val = id_rings[wc].value * (obj-&gt;class + <span class="hljs-number">1</span>);
		<span class="hljs-keyword">break</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (val &lt;= <span class="hljs-number">0</span>) {
		val = <span class="hljs-number">10</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	return(val);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span>
<span class="hljs-title">id_all</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">short</span> i;</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; SCROLS; i++) {
		id_scrolls[i].id_status = IDENTIFIED;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; WEAPONS; i++) {
		id_weapons[i].id_status = IDENTIFIED;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ARMORS; i++) {
		id_armors[i].id_status = IDENTIFIED;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; WANDS; i++) {
		id_wands[i].id_status = IDENTIFIED;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; POTIONS; i++) {
		id_potions[i].id_status = IDENTIFIED;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>}</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>
<span class="hljs-title">name_cmp</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *s1, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *s2)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">short</span> i = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">int</span> r;</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">while</span>(s1[i] != <span class="hljs-string">':'</span>) {
		i++;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	s1[i] = <span class="hljs-number">0</span>;
	r = <span class="hljs-built_in">strcmp</span>(s1, s2);
	s1[i] = <span class="hljs-string">':'</span>;
	return(r);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">void</span>
<span class="hljs-title">xxxx</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *buf, <span class="hljs-keyword">short</span> n)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">short</span> i;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> c;</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; n; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-comment">/* It does not matter if accuracy is lost during this assignment */</span>
		c = (unsigned char)xxx(<span class="hljs-number">0</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		buf[i] ^= c;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>}</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">long</span>
<span class="hljs-title">xxx</span><span class="hljs-params">(boolean st)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">static</span> <span class="hljs-keyword">long</span> f, s;
	<span class="hljs-keyword">long</span> r;</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (st) {
		f = <span class="hljs-number">37</span>;
		s = <span class="hljs-number">7</span>;
		return(<span class="hljs-number">0L</span>);
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	r = ((f * s) + <span class="hljs-number">9337</span>) % <span class="hljs-number">8887</span>;
	f = s;
	s = r;
	return(r);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span>
<span class="hljs-title">nickize</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *buf, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *score, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *n_name)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">short</span> i = <span class="hljs-number">15</span>, j;</pre></div></div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (!n_name[<span class="hljs-number">0</span>]) {
		<span class="hljs-built_in">strcpy</span>(buf, score);
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-built_in">strncpy</span>(buf, score, <span class="hljs-number">16</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">while</span> (score[i] != <span class="hljs-string">':'</span>) {
			i++;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-built_in">strcpy</span>(buf+<span class="hljs-number">15</span>, n_name);
		j = <span class="hljs-built_in">strlen</span>(buf);</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">while</span> (score[i]) {
			buf[j++] = score[i++];
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>		buf[j] = <span class="hljs-number">0</span>;
		buf[<span class="hljs-number">79</span>] = <span class="hljs-number">0</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>}</pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span>
<span class="hljs-title">center</span><span class="hljs-params">(<span class="hljs-keyword">short</span> row, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *buf)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">short</span> margin;</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	margin = ((DCOLS - strlen(buf)) / <span class="hljs-number">2</span>);
	mvaddstr(row, margin, buf);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span>
<span class="hljs-title">sf_error</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>	md_lock(<span class="hljs-number">0</span>);
	message(<span class="hljs-string">""</span>, <span class="hljs-number">1</span>);
	clean_up(<span class="hljs-string">"sorry, score file is out of order"</span>);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
